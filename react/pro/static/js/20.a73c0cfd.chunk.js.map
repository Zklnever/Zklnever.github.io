{"version":3,"sources":["scripts/views/home/index.js","scripts/components/head/index.js","scripts/actions/index.js"],"names":["Home","connect","state","count","getIn","city","banner","props","this","length","dispatch","getBanner","url","cb","console","log","title","autoplay","infinite","map","item","i","to","key","style","display","width","height","src","poster","alt","verticalAlign","onLoad","window","dispatchEvent","Event","defaultActiveKey","className","onChange","Panel","header","Item","onClick","changeCount","changeCity","Component","Head","show","history","goBack","push","search","mode","icon","type","onLeftClick","handleGoBack","rightContent","handleGoSearch","bind","marginRight","Pop","scan","login","myImg","visible","selected","handleVisibleChange","setState","onSelect","opt","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","payload","a","async","axios","get","res","data","result","getMobile","post","mobile","changeUser","getGoodList","params","getGoodType","changeGoodListReverse","getSearchList","changeSearchListReverse"],"mappings":"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","file":"static/js/20.a73c0cfd.chunk.js","sourcesContent":["import \"./index.scss\"\r\nimport React, {Component} from \"react\"\r\nimport Head from \"~/components/head\";\r\nimport {axios} from \"&\";\r\nimport {\r\n    WingBlank,\r\n    WhiteSpace,\r\n    Carousel,\r\n    Accordion,\r\n    List\r\n} from \"antd-mobile\"\r\nimport {Link} from \"react-router-dom\"\r\nimport {connect} from \"react-redux\"\r\nimport { changeCount, changeCity, getBanner } from \"../../actions\";\r\n\r\n@connect(\r\n    state=>{\r\n        return {\r\n            count:state.getIn(['data','count']),\r\n            city:state.getIn(['data','city']),\r\n            banner:state.getIn(['data','banner'])\r\n        }\r\n    }\r\n)\r\nclass Home extends Component{\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            banner:[]\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        // axios.get(\"/vue/maizuo/banner\")\r\n        // .then(res=>{\r\n        //     console.log(res);\r\n        //     this.setState({\r\n        //         banner:res.data.result.data\r\n        //     })\r\n        // })\r\n        if(!this.props.banner.length>0){\r\n            this.props.dispatch(getBanner({\r\n                url:\"/vue/maizuo/mv\",\r\n                cb(){\r\n                    console.log(\"get banner\")\r\n                }\r\n            }))\r\n        }\r\n        \r\n    }\r\n\r\n    render(){\r\n        // const {\r\n        //     banner\r\n        // }  = this.state;\r\n        const {\r\n            count,\r\n            dispatch,\r\n            city,\r\n            banner\r\n        } = this.props;\r\n       \r\n        return (\r\n            <div>\r\n                <Head title=\"首页\"></Head>\r\n                <WingBlank>\r\n                    <Carousel\r\n                        autoplay={true}\r\n                        infinite \r\n                    >\r\n                        {\r\n                            banner.map((item,i)=>{\r\n                                return (\r\n                                    <Link to=\"/\" key={i}  style={{ display: 'inline-block', width: '100%', height: 300 }}>\r\n                                        <img \r\n                                            src={item.poster} \r\n                                            alt=\"\"\r\n                                            style={{ width: '100%',height:300 , verticalAlign: 'top' }}\r\n                                            onLoad={() => {\r\n                                                // fire window resize event to change height\r\n                                                window.dispatchEvent(new Event('resize'));\r\n                                            }}\r\n                                            />\r\n                                    </Link>\r\n                                )\r\n\r\n                            })\r\n                        }\r\n                    </Carousel>\r\n                </WingBlank>\r\n                <WhiteSpace/>\r\n                <Accordion defaultActiveKey=\"0\" className=\"my-accordion\" onChange={this.onChange}>\r\n                    <Accordion.Panel header=\"Title 1\">\r\n                        <List className=\"my-list\">\r\n                        <List.Item onClick={()=>dispatch(changeCount(20))}>content 1--- {count}</List.Item>\r\n                        <List.Item onClick={()=>dispatch(changeCity(\"神农架...\"))}>content 2 === {city}</List.Item>\r\n                        <List.Item>content 3</List.Item>\r\n                        </List>\r\n                    </Accordion.Panel>\r\n                    <Accordion.Panel header=\"Title 2\" className=\"pad\">this is panel content2 or other</Accordion.Panel>\r\n                    <Accordion.Panel header=\"Title 3\" className=\"pad\">\r\n                        text text text text text text text text text text text text text text text\r\n                    </Accordion.Panel>\r\n                </Accordion>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default  Home; ","import \"./index.scss\";\r\nimport React , {Component} from \"react\"\r\nimport {\r\n    NavBar,\r\n    Icon,\r\n    Popover,\r\n    ActionSheet\r\n} from \"antd-mobile\"\r\nimport {history} from \"&\"\r\nexport default class Head extends Component{\r\n\r\n    handleGoBack(show){\r\n        if(show){\r\n            history.goBack();\r\n        }\r\n    }\r\n\r\n    handleGoSearch(){\r\n        history.push(\"/search\");\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            title,\r\n            show,\r\n            search\r\n        } = this.props;\r\n        return (\r\n            \r\n            <NavBar\r\n            mode=\"light\"\r\n            icon={show&&<Icon type=\"left\" />}\r\n            onLeftClick={() => this.handleGoBack(show)}\r\n            rightContent={[\r\n              !search&&<Icon onClick={this.handleGoSearch.bind(this) } key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n              <Pop scan={this.props.scan} login={this.props.login } key={1} />  ,\r\n            ]}\r\n          > {title} </NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\nclass Pop extends Component{\r\n    state = {\r\n        visible:false,\r\n        selected:\"\"\r\n    }\r\n\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n    }\r\n    onSelect = (opt) => {\r\n        console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: 'wh1910-app',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            scan,\r\n            login\r\n        } =  this.props;\r\n        return (\r\n            <Popover\r\n            mask\r\n            overlayClassName=\"fortest\"\r\n            overlayStyle={{ color: 'currentColor' }}\r\n            visible={this.state.visible}\r\n            overlay={[\r\n                ( !scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                  <span style={{ marginRight: 5 }}>登录</span>\r\n                </Item>),\r\n              ]}\r\n              align={{\r\n                overflow: { adjustY: 0, adjustX: 0 },\r\n                offset: [-10, 0],\r\n              }}\r\n              onVisibleChange={this.handleVisibleChange}\r\n              onSelect={this.onSelect}\r\n            >\r\n                <Icon type=\"ellipsis\" />\r\n            </Popover>\r\n        )\r\n    }\r\n}","\r\nimport {axios} from \"&\"\r\n\r\nexport function changeCount(payload){\r\n    return {\r\n        type:\"changeCount\",\r\n        payload\r\n    }\r\n}\r\n\r\nexport function changeCity(payload){\r\n    return {\r\n        type:\"changeCity\",\r\n        payload\r\n    }\r\n}\r\n\r\n\r\nexport async function getBanner({url,cb}){\r\n    const res = await axios.get(url);\r\n    cb()\r\n    return {\r\n        type:\"getBanner\",\r\n        payload:res.data.result\r\n    }\r\n}\r\n\r\nexport async function getMobile({url}){\r\n    const res = await axios.post(url);\r\n    return {\r\n        type:\"changeUser\",\r\n        payload:{\r\n            mobile:res.data.result\r\n        }\r\n    }\r\n} \r\n\r\nexport const changeUser = (payload)=>{\r\n    return {\r\n        type:\"changeUser\",\r\n        payload\r\n    }\r\n}\r\n\r\n\r\nexport async function getGoodList({url,params}){\r\n    const res = await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodList\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n\r\nexport async function getGoodType({url,params}){\r\n    const res = await axios.get(url,{params});\r\n    return {\r\n        type:\"getGoodType\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n\r\nexport function changeGoodListReverse(){\r\n    return {\r\n        type:\"changeGoodListReverse\",\r\n    }\r\n}\r\n\r\n\r\nexport async function getSearchList({url,params}){\r\n    const res = await axios.get(url,{params});\r\n    return {\r\n        type:\"getSearchList\",\r\n        payload:res.data.result\r\n    }\r\n} \r\n\r\n\r\nexport function changeSearchListReverse(){\r\n    return {\r\n        type:\"changeSearchListReverse\",\r\n    }\r\n}\r\n"],"sourceRoot":""}