{"version":3,"sources":["scripts/views/scan/index.js","utils/msg.js","utils/index.js","utils/axios.js","scripts/components/head/index.js"],"names":["alert","Scan","that","alertInstance","text","onPress","props","history","go","style","success","setTimeout","console","log","close","showAlert","this","title","show","scan","Component","People","names","age","hobby","score","createHashHistory","baseURL","token","fail","msg","hide","axios","defaults","headers","common","post","interceptors","request","use","config","time","loading","sessionStorage","error","offline","Promise","reject","response","data","code","push","type","Head","goBack","search","mode","icon","onLeftClick","handleGoBack","rightContent","onClick","handleGoSearch","bind","key","marginRight","Pop","login","Item","myImg","src","className","alt","state","visible","selected","handleVisibleChange","setState","onSelect","opt","value","showActionSheet","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange"],"mappings":"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","file":"static/js/19.785ded46.chunk.js","sourcesContent":["import \"./index.scss\"\r\nimport React, {Component} from \"react\"\r\nimport Head from \"~/components/head\";\r\nimport {\r\n    Modal,\r\n    Toast\r\n} from \"antd-mobile\";\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = (that) => {\r\n    const alertInstance = alert('警告', '我们即将调用你的手机系统硬件相机', [\r\n      { text: '取消', onPress: () => that.props.history.go(-1), style: 'default' },\r\n      { text: '同意', onPress: () => Toast.success('谢谢同意', 1) },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n  \r\nexport default class Scan extends Component{\r\n\r\n    componentWillMount(){\r\n        showAlert(this);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <Head title=\"扫一扫\" show={true} scan={true} ></Head>\r\n                <h2>扫一扫</h2>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nexport const msg = \"Are you Ok?\";\r\n\r\n\r\n// 构造函数  (构造器 + 原型对象 + 静态对象 )\r\nexport class People{\r\n\r\n    constructor(names,age){\r\n        this.names = names;\r\n        this.age = age;\r\n    }\r\n\r\n    // 原型对象\r\n    say(){\r\n\r\n    }\r\n\r\n    todo(){\r\n\r\n    }\r\n}\r\n\r\nPeople.hobby = [\"eat\",\"sleep\"]\r\n\r\n\r\nexport class Student extends People{\r\n    constructor(names,age,score){\r\n        super(names,age);  // super 当函数时 指向是父类的 构造器 \r\n        this.score = score;\r\n    }\r\n\r\n    goto(){\r\n\r\n    }\r\n\r\n    say(){\r\n        return super.say();   // super 当做对象时 指向的是父类的 原型对象 \r\n    }\r\n}\r\n\r\n\r\nStudent.hobby = [\"read\",\"music\"];\r\n\r\n\r\nexport class Component{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    render(){\r\n\r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n}\r\n\r\nexport class App extends Component{\r\n    \r\n}\r\n","import url from \"url\";\r\nimport {createHashHistory} from \"history\"; \r\n\r\nexport {msg} from \"./msg\"\r\n\r\nexport {config} from \"./config\"\r\n\r\nexport const commonCss = {\r\n    all:{\r\n        margin:0,\r\n        padding:0\r\n    },\r\n    three:{\r\n        backgroundColor:\"pink\",\r\n        boxShadow:\"0 0 0 10px blue\"\r\n    }\r\n}\r\n\r\n\r\nexport const commonJS = {\r\n    move(){\r\n        console.log(\"这是 鼠标滑动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"this is touch event 触摸事件 \")\r\n    }\r\n}\r\n\r\n\r\nexport {axios,baseURL} from \"./axios\"\r\n\r\n\r\n\r\nexport function GetQuery(search){\r\n\r\n    return url.parse(search,true).query;\r\n    // constructor(search){\r\n    //     this.search = search;\r\n    // }\r\n\r\n}\r\n\r\n\r\n\r\n// history = this.props.history \r\nexport const history = new createHashHistory();","\r\n\r\nimport axios from \"axios\";\r\nimport {Toast} from \"antd-mobile\"\r\nimport {history} from \"&\"\r\n// const baseURL = 'http://localhost:1910/'\r\nconst baseURL = 'http://zuozhaoxi.com:1910/'\r\n\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;   // req.headers.token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg,time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time , () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\n// axios  拦截器  Interceptors\r\n// request 请求发送之前的拦截器\r\naxios.interceptors.request.use(function (config) {\r\n\r\n    // 配置动画\r\n    loadingToast();\r\n    token =  sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n  }, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n// response 响应 完成 的拦截器\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if(response.data.code==\"3000\"){\r\n       // 跳转 登录 \r\n       history.push(\"/login\");\r\n    }\r\n    // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    if(!!response.data.type){\r\n        success(response.data.msg);\r\n    }else{\r\n        if(response.data.type==0){\r\n            fail(response.data.msg)\r\n        }else{\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n    \r\n\r\n    // 成功的响应\r\n    return response;\r\n  }, function (error) {\r\n    // 失败的响应 \r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport {axios,baseURL}","import \"./index.scss\";\r\nimport React , {Component} from \"react\"\r\nimport {\r\n    NavBar,\r\n    Icon,\r\n    Popover,\r\n    ActionSheet\r\n} from \"antd-mobile\"\r\nimport {history} from \"&\"\r\nexport default class Head extends Component{\r\n\r\n    handleGoBack(show){\r\n        if(show){\r\n            history.goBack();\r\n        }\r\n    }\r\n\r\n    handleGoSearch(){\r\n        history.push(\"/search\");\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            title,\r\n            show,\r\n            search\r\n        } = this.props;\r\n        return (\r\n            \r\n            <NavBar\r\n            mode=\"light\"\r\n            icon={show&&<Icon type=\"left\" />}\r\n            onLeftClick={() => this.handleGoBack(show)}\r\n            rightContent={[\r\n              !search&&<Icon onClick={this.handleGoSearch.bind(this) } key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n              <Pop scan={this.props.scan} login={this.props.login } key={1} />  ,\r\n            ]}\r\n          > {title} </NavBar>\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\nclass Pop extends Component{\r\n    state = {\r\n        visible:false,\r\n        selected:\"\"\r\n    }\r\n\r\n    handleVisibleChange=(visible)=>{\r\n        this.setState({\r\n            visible\r\n        })\r\n    }\r\n    onSelect = (opt) => {\r\n        console.log(opt.props.value);\r\n        this.setState({\r\n          visible: false,\r\n          selected: opt.props.value,\r\n        });\r\n\r\n        if(opt.props.value==\"login\"){\r\n            history.push(\"/login\");\r\n        }else if(opt.props.value==\"scan\"){\r\n            history.push(\"/scan\");\r\n        }else{\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          destructiveButtonIndex: BUTTONS.length - 2,\r\n          // title: 'title',\r\n          message: 'wh1910-app',\r\n          maskClosable: true,\r\n          'data-seed': 'logId',\r\n          wrapProps:{\r\n            onTouchStart: e => e.preventDefault(),\r\n          }\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n        });\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            scan,\r\n            login\r\n        } =  this.props;\r\n        return (\r\n            <Popover\r\n            mask\r\n            overlayClassName=\"fortest\"\r\n            overlayStyle={{ color: 'currentColor' }}\r\n            visible={this.state.visible}\r\n            overlay={[\r\n                ( !scan&&<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                (!login&&<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                  <span style={{ marginRight: 5 }}>登录</span>\r\n                </Item>),\r\n              ]}\r\n              align={{\r\n                overflow: { adjustY: 0, adjustX: 0 },\r\n                offset: [-10, 0],\r\n              }}\r\n              onVisibleChange={this.handleVisibleChange}\r\n              onSelect={this.onSelect}\r\n            >\r\n                <Icon type=\"ellipsis\" />\r\n            </Popover>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}