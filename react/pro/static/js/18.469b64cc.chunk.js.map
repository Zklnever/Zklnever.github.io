{"version":3,"sources":["scripts/mobx/shopcar.js","scripts/components/foot/index.js","scripts/components/afoot/index.js","scripts/views/main/index.js","utils/msg.js","utils/index.js","utils/axios.js"],"names":["Shopcar","carTotal","this","carList","forEach","item","count","carNum","checked","total","good","price","quan","newVal","map","observable","action","url","a","async","axios","get","res","data","result","post","then","filter","goodId","flag","computed","foots","txt","path","name","icon","Component","Afoot","observer","state","selectedTab","hash","window","location","console","log","tab","split","setState","className","unselectedTintColor","tintColor","barTintColor","foot","i","Item","title","key","style","width","height","selectedIcon","selected","badge","length","shopcar","onPress","history","push","data-seed","contextTypes","PropTypes","object","Main","props","component","LazyLoad","render","to","People","names","age","hobby","score","createHashHistory","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","sessionStorage","error","offline","Promise","reject","response","code","type"],"mappings":"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","file":"static/js/18.469b64cc.chunk.js","sourcesContent":["import {observable, action, computed, autorun} from  \"mobx\"\r\nimport {axios} from \"&\"\r\n\r\nclass Shopcar {\r\n    @observable carList = [] ;  // 购物车数据 \r\n    // @observable carNum = 10;     // 购物车选中数量 \r\n    // @observable carTotal = 18;   // 购物车总数量 \r\n\r\n    @action getCarList = async (url )  => {\r\n        const res = await axios.get(url);\r\n        this.carList = res.data.result ;\r\n    }\r\n\r\n    @action delSelect = ()=> {\r\n        axios.post(\"/react/delSelect\").then(res=>{\r\n            this.carList = this.carList.filter(item=>!item.checked);\r\n        })\r\n        \r\n    }\r\n\r\n\r\n    @action changeOneCount = (goodId,flag) =>{\r\n        \r\n        axios.post(\"/react/changeCount\",{\r\n            goodId,\r\n            flag\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId==goodId){\r\n                    item.count += flag?1:-1;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneCountNum = (goodId,count  )=>{\r\n        axios.post(\"/react/changeCount\",{\r\n            goodId,\r\n            count\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId==goodId){\r\n                    item.count  = count;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n    \r\n\r\n    @action changeOneChecked = (checked,goodId)=>{\r\n        axios.post(\"/react/changeChecked\",{\r\n            checked,\r\n            goodId\r\n        }).then(res=>{\r\n            this.carList = this.carList.map((item)=>{\r\n                if(item.goodId==goodId){\r\n                    item.checked = checked\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    @action changeQuan = checked =>{\r\n        axios.post(\"/react/changeChecked\",{\r\n            checked,\r\n        }).then(res=>{\r\n            this.quan = checked;\r\n        })\r\n        \r\n    }\r\n\r\n    @computed get carTotal(){\r\n        var carTotal = 0;\r\n        this.carList.forEach((item)=>{\r\n            carTotal +=item.count;\r\n        })\r\n        return carTotal;\r\n    }\r\n\r\n    @computed get carNum(){\r\n        var carNum = 0;\r\n        this.carList.forEach((item)=>{\r\n            if(item.checked){\r\n                carNum += item.count;\r\n            }\r\n        })\r\n        return carNum;\r\n    }\r\n\r\n    @computed get total(){\r\n        var total = 0;\r\n        this.carList.forEach((item)=>{\r\n            if(item.checked){\r\n                total += item.count * item.good.price;\r\n            }\r\n        })\r\n        return total;\r\n    }\r\n\r\n    @computed get quan(){\r\n        var quan = true;\r\n        this.carList.forEach(item=>{\r\n            if(!item.checked){\r\n                quan = false;\r\n            }\r\n        })\r\n        return quan;\r\n    }\r\n\r\n    set quan(newVal){\r\n        this.carList = this.carList.map((item)=>{\r\n            item.checked = newVal;\r\n            return item;\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default new Shopcar()","\r\nimport \"./index.scss\";\r\nimport React,{Component} from \"react\";\r\nimport {\r\n    NavLink\r\n}  from \"react-router-dom\"\r\nimport {Badge} from \"antd-mobile\"\r\n\r\nexport const foots = [\r\n    {txt:\"首页\",path:\"/main/home\",name:\"home\",icon:\"icon-home\"},\r\n    {txt:\"商品\",path:\"/main/classify\",name:\"classify\",icon:\"icon-goodsfill\"},\r\n    {txt:\"购物车\",path:\"/main/cart\",name:\"cart\",icon:\"icon-shop_car\"},\r\n    {txt:\"我\",path:\"/main/mine\",name:\"mine\",icon:\"icon-minefill\"}\r\n];\r\n\r\n\r\nexport class Foot extends Component{\r\n    \r\n    state = {\r\n        foots,\r\n        active:2\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log(\"mount\");\r\n        this.setState({\r\n            active:localStorage.active\r\n        })\r\n    }\r\n\r\n    handleChangeActive=(index)=>{\r\n        console.log(index);\r\n        localStorage.active = index;\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            active\r\n        } = this.state;\r\n        console.log(this.state);\r\n        return (\r\n           <footer>\r\n               {\r\n                   this.state.foots.map((foot,i)=>{\r\n                       return (\r\n                           <div key={i} onClick={()=>this.handleChangeActive(i)}>\r\n                                <NavLink activeClassName=\"nav-active\"  to={foot.path} >\r\n                                    <i className={\"iconfont \"+foot.icon}> </i>\r\n                                    <span> {foot.txt} </span>\r\n                                    {i==this.state.foots.length-2&&<Badge \r\n                                        text=\"8\" \r\n                                        className=\"hot\" \r\n                                        hot \r\n                                        style={{ \r\n                                        marginLeft: 12,\r\n                                        backgroundColor:active==2?\"darkgreen\":\"#999999\"\r\n                                     }} />}\r\n                                </NavLink>\r\n                           </div>\r\n                       )\r\n                   })\r\n               }\r\n           </footer>\r\n        )\r\n    }\r\n}","import \"./index.scss\";\r\nimport React,{Component} from \"react\";\r\nimport {foots} from \"../foot\"\r\n\r\nimport {\r\n    TabBar\r\n} from \"antd-mobile\"\r\n\r\nimport PropTypes from \"prop-types\"\r\nimport {history} from \"&\";\r\nimport {observer} from \"mobx-react\"\r\nimport shopcar from \"~/mobx/shopcar\"\r\n@observer  \r\nclass Afoot extends Component{\r\n\r\n    state = {\r\n        selectedTab:\"home\"\r\n    }\r\n\r\n    componentDidMount(){\r\n        var hash = window.location.hash;   //this.props.location context.location\r\n        console.log(hash)\r\n        var tab = hash.split(\"#/main/\")[1];\r\n        this.setState({\r\n            selectedTab:tab\r\n        })\r\n    }\r\n\r\n    render(){\r\n        console.log(this);\r\n        return (\r\n            <div className=\"foot\">\r\n                <TabBar\r\n                    unselectedTintColor=\"#949494\"\r\n                    tintColor=\"#33A3F4\"\r\n                    barTintColor=\"white\"\r\n                    \r\n                >\r\n                    {\r\n                        foots.map((foot,i)=>{\r\n                            return (\r\n                                <TabBar.Item\r\n                                    title={foot.txt}\r\n                                    key={i}\r\n                                    icon={<i style={{\r\n                                    width: '22px',\r\n                                    height: '22px',\r\n                                     }}\r\n                                    className={\"iconfont \"+ foot.icon}\r\n                                    />\r\n                                    }\r\n                                    selectedIcon={<div style={{\r\n                                    width: '22px',\r\n                                    height: '22px',\r\n                                    }}\r\n                                    className={\"iconfont \"+ foot.icon}\r\n                                    />\r\n                                    }\r\n                                    selected={this.state.selectedTab==foot.name}\r\n                                    badge={i==foots.length-2&&shopcar.carTotal}\r\n                                    onPress={  () => {\r\n                                        this.setState({\r\n                                            selectedTab: foot.name,\r\n                                        }); \r\n                                        // this.props.history.push(foot.path);\r\n                                        // this.context.history.push(foot.path);\r\n                                        history.push(foot.path);\r\n                                    }}\r\n                                    data-seed=\"logId\"\r\n                                >\r\n\r\n                                </TabBar.Item>\r\n                            )\r\n                        })\r\n                    }\r\n                </TabBar>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nAfoot.contextTypes = {\r\n    history:PropTypes.object\r\n}\r\n\r\nexport {Afoot}","import \"./index.scss\"\r\nimport React, {Component} from \"react\"\r\n\r\nimport {\r\n    Switch,\r\n    Route,\r\n    Redirect\r\n} from \"react-router-dom\";\r\n\r\nimport LazyLoad from \"&/lazyload\"\r\n// import {Foot} from \"~/components/foot\"\r\nimport {Afoot} from \"~/components/afoot\"\r\n\r\nexport default class Main extends Component{\r\n    render(){\r\n        console.log(this.props);\r\n        return (\r\n            <div className=\"box\" >\r\n                {/* <h2>main-main-main</h2>\r\n                <hr/> */}\r\n                <Switch>\r\n                    <Route path=\"/main/home\" component={LazyLoad(()=>import(\"../home\"))}   />\r\n                    <Route path=\"/main/classify\" component={LazyLoad(()=>import(\"../classify\"))}   />\r\n                    <Route path=\"/main/cart\" component={LazyLoad(()=>import(\"../cart\"))}   />\r\n                    <Route path=\"/main/mine\" component={LazyLoad(()=>import(\"../mine\"))}   />\r\n                    <Route render={()=>(<Redirect to=\"/main/home\" />  )}/>\r\n                </Switch>\r\n                <Afoot {...this.props}  />\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nexport const msg = \"Are you Ok?\";\r\n\r\n\r\n// 构造函数  (构造器 + 原型对象 + 静态对象 )\r\nexport class People{\r\n\r\n    constructor(names,age){\r\n        this.names = names;\r\n        this.age = age;\r\n    }\r\n\r\n    // 原型对象\r\n    say(){\r\n\r\n    }\r\n\r\n    todo(){\r\n\r\n    }\r\n}\r\n\r\nPeople.hobby = [\"eat\",\"sleep\"]\r\n\r\n\r\nexport class Student extends People{\r\n    constructor(names,age,score){\r\n        super(names,age);  // super 当函数时 指向是父类的 构造器 \r\n        this.score = score;\r\n    }\r\n\r\n    goto(){\r\n\r\n    }\r\n\r\n    say(){\r\n        return super.say();   // super 当做对象时 指向的是父类的 原型对象 \r\n    }\r\n}\r\n\r\n\r\nStudent.hobby = [\"read\",\"music\"];\r\n\r\n\r\nexport class Component{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    render(){\r\n\r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n}\r\n\r\nexport class App extends Component{\r\n    \r\n}\r\n","import url from \"url\";\r\nimport {createHashHistory} from \"history\"; \r\n\r\nexport {msg} from \"./msg\"\r\n\r\nexport {config} from \"./config\"\r\n\r\nexport const commonCss = {\r\n    all:{\r\n        margin:0,\r\n        padding:0\r\n    },\r\n    three:{\r\n        backgroundColor:\"pink\",\r\n        boxShadow:\"0 0 0 10px blue\"\r\n    }\r\n}\r\n\r\n\r\nexport const commonJS = {\r\n    move(){\r\n        console.log(\"这是 鼠标滑动事件\")\r\n    },\r\n    touch(){\r\n        console.log(\"this is touch event 触摸事件 \")\r\n    }\r\n}\r\n\r\n\r\nexport {axios,baseURL} from \"./axios\"\r\n\r\n\r\n\r\nexport function GetQuery(search){\r\n\r\n    return url.parse(search,true).query;\r\n    // constructor(search){\r\n    //     this.search = search;\r\n    // }\r\n\r\n}\r\n\r\n\r\n\r\n// history = this.props.history \r\nexport const history = new createHashHistory();","\r\n\r\nimport axios from \"axios\";\r\nimport {Toast} from \"antd-mobile\"\r\nimport {history} from \"&\"\r\n// const baseURL = 'http://localhost:1910/'\r\nconst baseURL = 'http://zuozhaoxi.com:1910/'\r\n\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;   // req.headers.token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg,time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time , () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\n// axios  拦截器  Interceptors\r\n// request 请求发送之前的拦截器\r\naxios.interceptors.request.use(function (config) {\r\n\r\n    // 配置动画\r\n    loadingToast();\r\n    token =  sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n  }, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n// response 响应 完成 的拦截器\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if(response.data.code==\"3000\"){\r\n       // 跳转 登录 \r\n       history.push(\"/login\");\r\n    }\r\n    // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    if(!!response.data.type){\r\n        success(response.data.msg);\r\n    }else{\r\n        if(response.data.type==0){\r\n            fail(response.data.msg)\r\n        }else{\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n    \r\n\r\n    // 成功的响应\r\n    return response;\r\n  }, function (error) {\r\n    // 失败的响应 \r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport {axios,baseURL}"],"sourceRoot":""}